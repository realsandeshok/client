{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import ProductCard from'./ProductCard';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const StockManagerPanel=()=>{const[products,setProducts]=useState([]);useEffect(()=>{const fetchProducts=async()=>{const{data}=await axios.get('http://localhost:5000/api/products');setProducts(data);};fetchProducts();},[]);const handleUpdate=async(productId,updatedFields)=>{try{const token=localStorage.getItem('authToken');//   if (!token) {\n//     throw new Error(\"No token found\");\n//   }\nconst config={headers:{'Authorization':`Bearer ${token}`}};const{data:updatedProduct}=await axios.put(`http://localhost:5000/api/products/${productId}`,updatedFields,config);// Updating the local state with the updated product\nsetProducts(products.map(p=>p._id===productId?updatedProduct:p));}catch(error){console.error(\"Failed to update the product:\",error.response?error.response.data:error.message);}};return/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-100 min-h-screen p-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-4xl mx-auto bg-white shadow-lg rounded-lg p-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold mb-8 text-gray-800\",children:\"Stock Manager Panel\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:products.map(product=>/*#__PURE__*/_jsx(ProductCard,{product:product,role:\"stockManager\",onUpdate:handleUpdate},product._id))})]})});};export default StockManagerPanel;","map":{"version":3,"names":["React","useState","useEffect","axios","ProductCard","jsx","_jsx","jsxs","_jsxs","StockManagerPanel","products","setProducts","fetchProducts","data","get","handleUpdate","productId","updatedFields","token","localStorage","getItem","config","headers","updatedProduct","put","map","p","_id","error","console","response","message","className","children","product","role","onUpdate"],"sources":["C:/Users/sande/stock-management-system/client/src/components/StockManagerPanel.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport ProductCard from './ProductCard';\r\n\r\nconst StockManagerPanel = () => {\r\n  const [products, setProducts] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const fetchProducts = async () => {\r\n      const { data } = await axios.get('http://localhost:5000/api/products');\r\n      setProducts(data);\r\n    };\r\n    fetchProducts();\r\n  }, []);\r\n\r\nconst handleUpdate = async (productId, updatedFields) => {\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n\r\n    //   if (!token) {\r\n    //     throw new Error(\"No token found\");\r\n    //   }\r\n\r\n      const config = {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n        },\r\n      };\r\n\r\n      const { data: updatedProduct } = await axios.put(\r\n        `http://localhost:5000/api/products/${productId}`, \r\n        updatedFields, \r\n        config\r\n      );\r\n\r\n      // Updating the local state with the updated product\r\n      setProducts(products.map(p => (p._id === productId ? updatedProduct : p)));\r\n    } catch (error) {\r\n      console.error(\"Failed to update the product:\", error.response ? error.response.data : error.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-gray-100 min-h-screen p-8\">\r\n    <div className=\"max-w-4xl mx-auto bg-white shadow-lg rounded-lg p-6\">\r\n      <h1 className=\"text-3xl font-bold mb-8 text-gray-800\">Stock Manager Panel</h1>\r\n      \r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n        {products.map((product) => (\r\n          <ProductCard\r\n            key={product._id}\r\n            product={product}\r\n            role=\"stockManager\"\r\n            onUpdate={handleUpdate}\r\n          />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  </div>\r\n  );\r\n};\r\n\r\nexport default StockManagerPanel;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,WAAW,KAAM,eAAe,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAExC,KAAM,CAAAC,iBAAiB,CAAGA,CAAA,GAAM,CAC9B,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGV,QAAQ,CAAC,EAAE,CAAC,CAE5CC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAU,aAAa,CAAG,KAAAA,CAAA,GAAY,CAChC,KAAM,CAAEC,IAAK,CAAC,CAAG,KAAM,CAAAV,KAAK,CAACW,GAAG,CAAC,oCAAoC,CAAC,CACtEH,WAAW,CAACE,IAAI,CAAC,CACnB,CAAC,CACDD,aAAa,CAAC,CAAC,CACjB,CAAC,CAAE,EAAE,CAAC,CAER,KAAM,CAAAG,YAAY,CAAG,KAAAA,CAAOC,SAAS,CAAEC,aAAa,GAAK,CACrD,GAAI,CACF,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC,CAEjD;AACA;AACA;AAEE,KAAM,CAAAC,MAAM,CAAG,CACbC,OAAO,CAAE,CACP,eAAe,CAAE,UAAUJ,KAAK,EAClC,CACF,CAAC,CAED,KAAM,CAAEL,IAAI,CAAEU,cAAe,CAAC,CAAG,KAAM,CAAApB,KAAK,CAACqB,GAAG,CAC9C,sCAAsCR,SAAS,EAAE,CACjDC,aAAa,CACbI,MACF,CAAC,CAED;AACAV,WAAW,CAACD,QAAQ,CAACe,GAAG,CAACC,CAAC,EAAKA,CAAC,CAACC,GAAG,GAAKX,SAAS,CAAGO,cAAc,CAAGG,CAAE,CAAC,CAAC,CAC5E,CAAE,MAAOE,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,+BAA+B,CAAEA,KAAK,CAACE,QAAQ,CAAGF,KAAK,CAACE,QAAQ,CAACjB,IAAI,CAAGe,KAAK,CAACG,OAAO,CAAC,CACtG,CACF,CAAC,CAED,mBACEzB,IAAA,QAAK0B,SAAS,CAAC,8BAA8B,CAAAC,QAAA,cAC7CzB,KAAA,QAAKwB,SAAS,CAAC,qDAAqD,CAAAC,QAAA,eAClE3B,IAAA,OAAI0B,SAAS,CAAC,uCAAuC,CAAAC,QAAA,CAAC,qBAAmB,CAAI,CAAC,cAE9E3B,IAAA,QAAK0B,SAAS,CAAC,sDAAsD,CAAAC,QAAA,CAClEvB,QAAQ,CAACe,GAAG,CAAES,OAAO,eACpB5B,IAAA,CAACF,WAAW,EAEV8B,OAAO,CAAEA,OAAQ,CACjBC,IAAI,CAAC,cAAc,CACnBC,QAAQ,CAAErB,YAAa,EAHlBmB,OAAO,CAACP,GAId,CACF,CAAC,CACC,CAAC,EACH,CAAC,CACH,CAAC,CAER,CAAC,CAED,cAAe,CAAAlB,iBAAiB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}